<!DOCTYPE html>
<html lang=""><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Time Ordering</title>
    <meta name="description" content="">
    <meta name="author" content=''>

    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous">

    
    <link rel="stylesheet" href="../../../sass/researcher.min.css">

    

    
        
    
</head>

    <body><div class="container mt-5">
    <nav class="navbar navbar-expand-sm flex-column flex-sm-row text-nowrap p-0">
        <a class="navbar-brand mx-0 mr-sm-auto" href="../../../" title="Ziqi">
          
          Ziqi
        </a>
        <div class="navbar-nav flex-row flex-wrap justify-content-center">
            
                
                
                    <a class="nav-item nav-link" href="../../../notes" title="Notes">
                        Notes
                    </a>
                    
                        <span class="nav-item navbar-text mx-1">/</span>
                    
                
                    <a class="nav-item nav-link" href="../../../resume" title="Resume">
                        Resume
                    </a>
                    
                
            
        </div>
    </nav>
</div>
<hr>
<div id="content">
<div class="container">
    <p>A timestamp is a unique identifier created to identify
a transaction.  Typically, timestamp values are assigned in the order in
which the transactions are submitted to the system.  In this context,
a timestamp can be thought of as the transaction start time.
I&rsquo;ll refer to the timestamp of a transaction <code>T</code> as <code>ts(T)</code> and all
operations of <code>T</code> are assigned timestamp <code>ts(T)</code>.</p>
<p>The easiest way to think of how timestamps are generated is to
think of a simple counter that is incremented each time the
counter&rsquo;s value is assigned to a transaction.  Using this scheme,
transactions would be numbered 1, 2, 3, &hellip;</p>
<p>The basic idea in TO is to generate transaction timestamps, and to then
order transactions using these timestamps. If the schedule of
transactions is equivalent to this <strong>particular</strong> timestamp (serial)
order, then the schedule is serializable.
This is in contrast to two-phase locking, which ensures
that the schedule is equivalent to <strong>some</strong> serial schedule allowed by
the locking protocol.</p>
<p>In TO, two timestamps are associated with each data item <code>X</code>:</p>
<ol>
<li><code>read_ts(X)</code>: this is the largest timestamp from among all timestamps
of transactions that have successfully read <code>X</code>.</li>
<li><code>write_ts(X)</code>: this is the largest timestamp from among all timestamps
of transactions that have successfully written <code>X</code>.</li>
</ol>
<p>When a transaction <code>T1</code> issues <code>read(X)</code>:</p>
<p>If <code>write_ts(X) &gt; ts(T1)</code>:
the operation is rejected and <code>T1</code> is aborted.
This is because some other transaction <code>T2</code> with timestamp
<strong>greater</strong> than <code>T1</code>, and therefore <strong>after</strong> <code>T1</code> in timestamp order, has
already written <code>X</code> (a conflicting operation) before <code>T1</code> reads <code>X</code>.  If
the schedule is to be in the order of timestamps, since T1 and T2
conflict and <code>ts(T1) &lt; ts(T2)</code>, all of <code>T1</code>&rsquo;s operations should come
before any operation of <code>T2</code>.</p>
<p>If <code>write_ts(X) &lt;= ts(T1)</code>:
<code>read(X)</code> of <code>T1</code> is executed and <code>read_ts(X)</code> is set to the larger of
<code>ts(T1)</code> and <code>read_ts(X)</code>.</p>
<p>When a transaction T1 issues <code>write(X)</code>:</p>
<p>If <code>write_ts(X)</code> &gt; <code>ts(T1)</code> or <code>read_ts(X) &gt; ts(T1)</code>:
the operation is rejected and <code>T1</code> is aborted. This is because some
other transaction (call it <code>T2</code>) with timestamp <strong>greater</strong> than <code>T1</code>, and
therefore <strong>after</strong> <code>T1</code> in timestamp order, has already read or written <code>X</code>
(a conflicting operation) before <code>T1</code> writes <code>X</code>.  If the schedule is to
be in the order of timestamps, since <code>T1</code> and <code>T2</code> conflict and
<code>ts(T1) &lt; ts(T2)</code>, all of <code>T1</code>&rsquo;s operations should come before any
operation of <code>T2</code>.</p>
<p>If <code>write_ts(X) &lt;= ts(T1)</code> and <code>read_ts(X) &lt;= ts(T1)</code>:
<code>write(X)</code> of <code>T1</code> is executed and <code>write_ts(X)</code> is set to <code>ts(T1)</code>.</p>

</div>

        </div><div id="footer" class="mb-5">
    <hr>
    
    
</div>
</body>
</html>
